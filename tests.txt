# ============================================================================
# LISTE DE TESTS MANUELS POUR MINISHELL - 42
# ============================================================================
# 
# Instructions :
# 1. Lance ton minishell : ./minishell
# 2. Copie-colle chaque bloc de commandes
# 3. Compare le rÃ©sultat avec bash (lance bash dans un autre terminal)
# 4. Coche [âœ“] si le comportement est identique Ã  bash
#
# ============================================================================

# ============================================================================
# SECTION 1 : COMMANDES DE BASE
# ============================================================================

[ ] echo hello world
    â†’ Doit afficher : hello world

[ ] echo -n hello world
    â†’ Doit afficher : hello world (sans newline Ã  la fin)

[ ] echo -n -n -n test
    â†’ Doit afficher : test (sans newline)

[ ] echo -nnnnn hello
    â†’ Doit afficher : hello (sans newline)

[ ] echo
    â†’ Doit afficher une ligne vide

[ ] echo "   hello   "
    â†’ Doit afficher :    hello    (avec espaces)

[ ] echo    multiple    spaces
    â†’ Doit afficher : multiple spaces

[ ] pwd
    â†’ Doit afficher le chemin actuel


# ============================================================================
# SECTION 2 : VARIABLES D'ENVIRONNEMENT
# ============================================================================

[ ] export TEST=hello
    â†’ Pas de sortie

[ ] echo $TEST
    â†’ Doit afficher : hello

=====================================INVALID READ 

[ ] export TEST=
    â†’ Variable vide

[ ] echo $TEST
    â†’ Doit afficher une ligne vide

[ ] export TEST="hello world"
    â†’ Variable avec espaces

[ ] echo $TEST
    â†’ Doit afficher : hello world

[ ] echo $UNDEFINED_VAR
    â†’ Doit afficher une ligne vide (variable non dÃ©finie)

[ ] export A=1 B=2 C=3
    â†’ Plusieurs exports

[ ] echo $A $B $C
    â†’ Doit afficher : 1 2 3

[ ] export
    â†’ Doit afficher toutes les variables exportÃ©es

[ ] unset TEST
    â†’ Supprime la variable

[ ] echo $TEST
    â†’ Doit afficher une ligne vide

[ ] unset NONEXISTENT
    â†’ Pas d'erreur

# ============================================================================
# SECTION 3 : EXIT STATUS ($?)
# ============================================================================

[ ] ls
    â†’ Commande qui rÃ©ussit

[ ] echo $?
    â†’ Doit afficher : 0

[ ] ls /nonexistent 2>/dev/null
    â†’ Commande qui Ã©choue

[ ] echo $?
    â†’ Doit afficher un code non-zÃ©ro (souvent 2)

[ ] echo $?
    â†’ Doit afficher : 0 (le echo prÃ©cÃ©dent a rÃ©ussi)

[ ] false
    â†’ Commande qui retourne 1

[ ] echo $?
    â†’ Doit afficher : 1

[ ] true
    â†’ Commande qui retourne 0

[ ] echo $?
    â†’ Doit afficher : 0

# ============================================================================
# SECTION 4 : GUILLEMETS (QUOTES)
# ============================================================================

[ ] echo 'hello world'
    â†’ Doit afficher : hello world

[ ] echo "hello world"
    â†’ Doit afficher : hello world

[ ] export TEST=value

[ ] echo '$TEST'
    â†’ Doit afficher : $TEST (pas d'expansion dans quotes simples)

[ ] echo "$TEST"
    â†’ Doit afficher : value (expansion dans quotes doubles)

[ ] echo ''
    â†’ Doit afficher une ligne vide

[ ] echo ""
    â†’ Doit afficher une ligne vide

[ ] echo "hello 'world'"
    â†’ Doit afficher : hello 'world'

[ ] echo 'hello "world"'
    â†’ Doit afficher : hello "world"

[ ] echo "it's"
    â†’ Doit afficher : it's

# ============================================================================
# SECTION 5 : REDIRECTIONS
# ============================================================================

[ ] echo hello > test_file
    â†’ CrÃ©e un fichier

[ ] cat test_file
    â†’ Doit afficher : hello

[ ] echo world >> test_file
    â†’ Ajoute au fichier

[ ] cat test_file
    â†’ Doit afficher :
    hello
    world

[ ] cat < test_file
    â†’ Doit afficher le contenu du fichier

[ ] cat < nonexistent_file
    â†’ Doit afficher une erreur

[ ] echo test > file1 > file2
    â†’ Redirections multiples, seul file2 contient "test"

[ ] cat file2
    â†’ Doit afficher : test

[ ] > empty_file
    â†’ CrÃ©e un fichier vide

[ ] ls -l empty_file
    â†’ Fichier existe et est vide (taille 0)

[ ] rm test_file file1 file2 empty_file
    â†’ Nettoie les fichiers

# ============================================================================
# SECTION 6 : PIPES
# ============================================================================

[ ] echo hello | cat
    â†’ Doit afficher : hello

[ ] echo hello | cat | cat | cat
    â†’ Doit afficher : hello (pipes multiples)

[ ] ls | grep mini
    â†’ Doit filtrer les rÃ©sultats

[ ] echo hello | cat > pipe_file
    â†’ Pipe + redirection

[ ] cat pipe_file
    â†’ Doit afficher : hello

[ ] rm pipe_file
    â†’ Nettoie

# ============================================================================
# SECTION 7 : HEREDOC (<<)
# ============================================================================

[ ] cat << EOF
hello
world
EOF
    â†’ Doit afficher :
    hello
    world

[ ] export VAR=test

[ ] cat << EOF
value: $VAR
EOF
    â†’ Doit afficher :
    value: test
    (expansion de variable)

======================== ERREUR

[ ] cat << 'EOF'
value: $VAR
EOF
    â†’ Doit afficher :
    value: $VAR
    (PAS d'expansion avec limiter quotÃ©)

[ ] cat << EOF

EOF
    â†’ Heredoc vide (affiche juste une ligne vide)

# ============================================================================
# SECTION 8 : BUILT-IN cd
# ============================================================================

[ ] pwd
    â†’ Note le chemin actuel

[ ] cd /tmp
    â†’ Change de dossier

[ ] pwd
    â†’ Doit afficher : /tmp

[ ] cd ..
    â†’ Remonte d'un niveau

[ ] pwd
    â†’ VÃ©rifie le chemin

[ ] cd
    â†’ Sans argument, doit aller Ã  $HOME

[ ] pwd
    â†’ Doit afficher ton HOME

[ ] cd /nonexistent
    â†’ Doit afficher une erreur

[ ] echo $?
    â†’ Doit afficher un code d'erreur (souvent 1)

[ ] cd -
    â†’ Retourne au dossier prÃ©cÃ©dent

[ ] pwd
    â†’ VÃ©rifie le changement

# ============================================================================
# SECTION 9 : BUILT-IN env
# ============================================================================

[ ] env
    â†’ Affiche toutes les variables d'environnement

[ ] env | grep PATH
    â†’ Doit trouver PATH

[ ] env | grep USER
    â†’ Doit trouver USER

[ ] export MYVAR=test123

[ ] env | grep MYVAR
    â†’ Doit afficher : MYVAR=test123

# ============================================================================
# SECTION 10 : BUILT-IN exit
# ============================================================================

âš ï¸ ATTENTION : Ces tests vont fermer ton minishell !

[ ] exit
    â†’ Doit quitter le minishell proprement

[ ] ./minishell
    exit 42
    â†’ Relance bash et fais : echo $?
    â†’ Doit afficher : 42

[ ] ./minishell
    exit abc
    â†’ Doit afficher une erreur (argument non numÃ©rique)

[ ] ./minishell
    exit 1 2 3
    â†’ Doit afficher une erreur (trop d'arguments)

# ============================================================================
# SECTION 11 : CAS COMPLEXES ET EDGE CASES
# ============================================================================

[ ] export VAR=hello

[ ] echo $VARworld
    â†’ Doit afficher une ligne vide ($VARworld n'existe pas)

[ ] echo ${VAR}world
    â†’ Si tu gÃ¨res les accolades, doit afficher : helloworld

[ ] echo $VAR$VAR
    â†’ Doit afficher : hellohello

[ ] export EMPTY=

[ ] echo prefix${EMPTY}suffix
    â†’ Doit afficher : prefixsuffix

[ ] echo "$USER is here"
    â†’ Doit afficher ton username

[ ] echo '$USER is here'
    â†’ Doit afficher : $USER is here

[ ] echo    multiple    spaces    here
    â†’ Bash rÃ©duit les espaces multiples : multiple spaces here

[ ] echo "   multiple   spaces   "
    â†’ Dans les quotes, espaces prÃ©servÃ©s

[ ] echo hello > file && echo world >> file && cat file
    â†’ Doit afficher :
    hello
    world

[ ] export A=1 && export B=2 && echo $A $B
    â†’ Doit afficher : 1 2

[ ] echo test | grep test | cat
    â†’ Pipes multiples, doit afficher : test

[ ] ls | cat | cat | cat | cat
    â†’ Doit fonctionner (beaucoup de pipes)

# ============================================================================
# SECTION 12 : GESTION D'ERREURS
# ============================================================================

[ ] commandeInexistante123
    â†’ Doit afficher : command not found (ou Ã©quivalent)

[ ] echo $?
    â†’ Doit afficher : 127

[ ] cat fichier_inexistant
    â†’ Doit afficher : No such file or directory

[ ] echo $?
    â†’ Doit afficher : 1

[ ] cd fichier_normal (pas un dossier)
    â†’ Doit afficher une erreur

[ ] |
    â†’ Syntaxe invalide, doit afficher une erreur

[ ] echo test |
    â†’ Syntaxe invalide, doit afficher une erreur

[ ] echo test >
    â†’ Syntaxe invalide, doit afficher une erreur

[ ] echo "test non fermÃ©
    â†’ Quote non fermÃ©e, doit afficher une erreur ou attendre la suite

# ============================================================================
# SECTION 13 : SIGNAUX (Tests interactifs)
# ============================================================================

âš ï¸ Tests Ã  faire en mode interactif :

[ ] Lance ./minishell
    Appuie sur Ctrl-C
    â†’ Doit afficher un nouveau prompt (ne doit PAS quitter)

[ ] Lance ./minishell
    Appuie sur Ctrl-D
    â†’ Doit quitter proprement (afficher "exit")

[ ] Lance ./minishell
    Appuie sur Ctrl-\
    â†’ Ne doit rien faire (ignorer SIGQUIT)

[ ] Lance ./minishell
    cat (sans argument)
    Appuie sur Ctrl-C
    â†’ Doit tuer cat et revenir au prompt

[ ] Lance ./minishell
    cat (sans argument)
    Appuie sur Ctrl-D
    â†’ Doit terminer cat proprement

# ============================================================================
# SECTION 14 : TESTS AVEC COMMANDES RÃ‰ELLES
# ============================================================================

[ ] ls -la
    â†’ Doit fonctionner normalement

[ ] ls -la | grep mini
    â†’ Pipe avec options

[ ] cat Makefile
    â†’ Doit afficher le Makefile

[ ] cat Makefile | grep CC
    â†’ Pipe avec cat

[ ] grep minishell Makefile
    â†’ Doit chercher dans le fichier

[ ] wc -l Makefile
    â†’ Compte les lignes

[ ] ls | wc -l
    â†’ Compte le nombre de fichiers

[ ] echo "test" | wc -c
    â†’ Compte les caractÃ¨res

# ============================================================================
# SECTION 15 : BUILT-INS DANS PIPES (âš ï¸ CAS IMPORTANT)
# ============================================================================

âš ï¸ Ces tests sont CRITIQUES pour la correction !

[ ] pwd
    â†’ Note le dossier actuel

[ ] echo test | cd /tmp
    â†’ cd dans un pipe

[ ] pwd
    â†’ Doit afficher le MÃŠME dossier qu'avant !
    â†’ Le cd dans le pipe ne doit PAS changer le pwd du shell parent

[ ] export VAR=before

[ ] echo test | export VAR=after

[ ] echo $VAR
    â†’ Doit afficher : before
    â†’ L'export dans le pipe ne doit PAS modifier le shell parent

[ ] echo test | unset VAR

[ ] echo $VAR
    â†’ Doit afficher : before
    â†’ L'unset dans le pipe ne doit PAS modifier le shell parent

# ============================================================================
# SECTION 16 : CAS TORDUS (BONUS)
# ============================================================================

[ ] echo "$?"
    â†’ Doit afficher : 0

[ ] echo $
    â†’ Doit afficher : $ (dollar seul)

[ ] echo $$
    â†’ Affiche le PID (peut diffÃ©rer de bash, c'est OK)

[ ] echo ''''''
    â†’ Quotes vides multiples

[ ] echo """"""
    â†’ Quotes doubles vides multiples

[ ] echo "'"
    â†’ Quote simple dans double

[ ] echo '"'
    â†’ Quote double dans simple

[ ] export TEST='a=b'

[ ] echo $TEST
    â†’ Doit afficher : a=b

[ ] env | grep TEST
    â†’ Doit afficher : TEST=a=b

# ============================================================================
# RÃ‰SUMÃ‰ ET CONSEILS
# ============================================================================

AprÃ¨s avoir testÃ© toutes ces commandes :

âœ… Si TOUT fonctionne identiquement Ã  bash â†’ Tu es prÃªt pour la correction !

âš ï¸  Si quelques cas limites Ã©chouent â†’ Note-les et corrige-les

âŒ Si beaucoup de tests Ã©chouent â†’ Revois les bases (parsing, built-ins, pipes)

Points critiques Ã  vÃ©rifier absolument :
1. Les built-ins (cd, export, unset) dans le shell parent (pas dans un pipe)
2. Les built-ins dans un pipe ne doivent PAS modifier le shell parent
3. La variable $? aprÃ¨s chaque commande
4. Les signaux (Ctrl-C, Ctrl-D, Ctrl-\)
5. Les quotes (simples vs doubles, expansion ou pas)
6. Les redirections (>, >>, <, <<)
7. Les pipes multiples

Bon courage pour la correction ! ðŸš€